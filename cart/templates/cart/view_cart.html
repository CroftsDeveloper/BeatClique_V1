{% extends 'base.html' %}
{% load static %}

{% block title %}Your Cart - BeatClique{% endblock title %}

{% block content %}
<div class="container mt-4"> <!-- Adjusted margin top -->
    <h2 class="my-4 text-center">Your Cart <i class="fas fa-shopping-cart ms-2"></i></h2>
    <form action="{% url 'cart:update_cart' %}" method="post">
        {% csrf_token %}
        {% if items %}
            <div class="list-group mb-4">
                {% for item in items %}
                    <!-- Cart item display using Bootstrap grid for responsive layout -->
                    <div class="list-group-item">
                        <div class="row align-items-center">
                            <div class="col-md-6">
                                <span>{{ item.soundkit.name }}</span>
                            </div>
                            <div class="col-md-3">
                                <!-- Quantity input field -->
                                <input type="number" name="quantity_{{ item.id }}" value="{{ item.quantity }}" min="1" class="form-control form-control-sm" aria-label="Quantity">
                            </div>
                            <div class="col-md-3">
                                <!-- Update and Remove buttons with Bootstrap styling and spacing -->
                                <div class="btn-group" role="group" aria-label="Cart actions">
                                    <button type="submit" name="update" value="{{ item.id }}" class="btn btn-primary btn-md me-2">Update</button>
                                    <button type="submit" name="remove" value="{{ item.id }}" class="btn btn-danger btn-md">Remove</button>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <!-- Checkout button with consistent size -->
            <div class="text-center">
                <a href="{% url 'payments:create_checkout_session' %}" class="btn btn-success btn-md mb-3">Checkout</a>
            </div>
        {% else %}
            <!-- Display message if cart is empty and provide link to products -->
            <p class="mt-4 text-center">Your cart is empty.</p>
            <div class="text-center">
                <a href="{% url 'soundkit_list' %}" class="btn btn-primary btn-lg mb-3">Return to SoundKits</a>
            </div>
        {% endif %}
    </form>
</div>
{% endblock %}
